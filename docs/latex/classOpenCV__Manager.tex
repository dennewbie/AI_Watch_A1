\hypertarget{classOpenCV__Manager}{}\doxysection{Open\+CV\+\_\+\+Manager Class Reference}
\label{classOpenCV__Manager}\index{OpenCV\_Manager@{OpenCV\_Manager}}


\mbox{\hyperlink{classOpenCV__Manager}{Open\+CV\+\_\+\+Manager}} class is used for general-\/purpose tasks on the captured frames.  




{\ttfamily \#include $<$Open\+CV\+\_\+\+Manager.\+hpp$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{classOpenCV__Manager_abc9a2e3cc425fcb1d364000ea2ad51d7}{$\sim$\+Open\+CV\+\_\+\+Manager}} ()=default
\begin{DoxyCompactList}\small\item\em Destroy the \mbox{\hyperlink{classOpenCV__Manager}{Open\+CV\+\_\+\+Manager}} object. \end{DoxyCompactList}\item 
cv\+::\+Mat \mbox{\hyperlink{classOpenCV__Manager_a763f869b71bef3cd172254b2511b789f}{realsense\+Frame\+To\+Mat}} (const rs2\+::frame \&single\+Frame)
\begin{DoxyCompactList}\small\item\em This method converts a frame of type rs2\+::frame to cv\+::\+Mat. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classOpenCV__Manager_a539a0c005b8541f68bab2b36a9d84aba}{get\+Video\+Frames\+CV}} (unsigned int user\+\_\+n\+Frame, rs2\+::pipeline \&pipeline\+Stream, float scale, const unsigned short int frames\+To\+Skip)
\begin{DoxyCompactList}\small\item\em Get user\+\_\+n\+Frame video frames from the pipeline by applying a specific scaling factor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classOpenCV__Manager_a91d73f7ffc0147f9e99a05e524a28db5}{show\+Skeletons\+CV}} (unsigned int user\+\_\+n\+Frame, const float skeleton\+Threshold)
\begin{DoxyCompactList}\small\item\em Retrieve Open\+Pose\textquotesingle{}s output, convert it to Real\+Sense coordinate\textquotesingle{}s space, show results and save them. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{classOpenCV__Manager}{Open\+CV\+\_\+\+Manager}} class is used for general-\/purpose tasks on the captured frames. 

\mbox{\hyperlink{classOpenCV__Manager}{Open\+CV\+\_\+\+Manager}} class is a class that is responsible for converting a rs2\+::frame to a cv\+::\+Mat, retrieving video frames from the camera and handling them, showing the skeletons, producing related output, and saving results. 

Definition at line \mbox{\hyperlink{OpenCV__Manager_8hpp_source_l00023}{23}} of file \mbox{\hyperlink{OpenCV__Manager_8hpp_source}{Open\+CV\+\_\+\+Manager.\+hpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classOpenCV__Manager_abc9a2e3cc425fcb1d364000ea2ad51d7}\label{classOpenCV__Manager_abc9a2e3cc425fcb1d364000ea2ad51d7}} 
\index{OpenCV\_Manager@{OpenCV\_Manager}!````~OpenCV\_Manager@{$\sim$OpenCV\_Manager}}
\index{````~OpenCV\_Manager@{$\sim$OpenCV\_Manager}!OpenCV\_Manager@{OpenCV\_Manager}}
\doxysubsubsection{\texorpdfstring{$\sim$OpenCV\_Manager()}{~OpenCV\_Manager()}}
{\footnotesize\ttfamily virtual Open\+CV\+\_\+\+Manager\+::$\sim$\+Open\+CV\+\_\+\+Manager (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



Destroy the \mbox{\hyperlink{classOpenCV__Manager}{Open\+CV\+\_\+\+Manager}} object. 



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classOpenCV__Manager_a539a0c005b8541f68bab2b36a9d84aba}\label{classOpenCV__Manager_a539a0c005b8541f68bab2b36a9d84aba}} 
\index{OpenCV\_Manager@{OpenCV\_Manager}!getVideoFramesCV@{getVideoFramesCV}}
\index{getVideoFramesCV@{getVideoFramesCV}!OpenCV\_Manager@{OpenCV\_Manager}}
\doxysubsubsection{\texorpdfstring{getVideoFramesCV()}{getVideoFramesCV()}}
{\footnotesize\ttfamily void Open\+CV\+\_\+\+Manager\+::get\+Video\+Frames\+CV (\begin{DoxyParamCaption}\item[{unsigned int}]{user\+\_\+n\+Frame,  }\item[{rs2\+::pipeline \&}]{pipeline\+Stream,  }\item[{float}]{scale,  }\item[{const unsigned short int}]{frames\+To\+Skip }\end{DoxyParamCaption})}



Get user\+\_\+n\+Frame video frames from the pipeline by applying a specific scaling factor. 


\begin{DoxyParams}{Parameters}
{\em user\+\_\+n\+Frame} & frame\textquotesingle{}s number to capture according to user choice. \\
\hline
{\em pipeline\+Stream} & The pipeline simplifies the user interaction with the device and computer vision processing modules. The class abstracts the camera configuration and streaming, and the vision modules triggering and threading. It lets the application focus on the computer vision output of the modules, or the device output data. The pipeline can manage computer vision modules, which are implemented as a processing block. The pipeline is the consumer of the processing block interface, while the application consumes the computer vision interface. \\
\hline
{\em scale} & Scaling factor. \\
\hline
{\em frames\+To\+Skip} & Frames\textquotesingle{} number to skip in order to ignore a certain amount of frames and extend the recording interval. A \textquotesingle{}0\textquotesingle{} value means \textquotesingle{}capture each frame\textquotesingle{}. \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\href{https://dev.intelrealsense.com/docs/docs-get-started}{\texttt{ https\+://dev.\+intelrealsense.\+com/docs/docs-\/get-\/started}} 

get\+Video\+Frames(unsigned int user\+\_\+n\+Frame, rs2\+::pipeline \& pipeline\+Stream, float scale) 

get\+Video\+Frames\+RS(unsigned int user\+\_\+n\+Frame, rs2\+::pipeline \& pipeline\+Stream, rs2\+::depth\+\_\+frame \& depth\+Frame, rs2\+::frame \& color\+Frame, rs2\+::frame \& colorized\+Depth\+Frame) 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{OpenCV__Manager_8cpp_source_l00037}{37}} of file \mbox{\hyperlink{OpenCV__Manager_8cpp_source}{Open\+CV\+\_\+\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00037                                                                                                                                                  \{}
\DoxyCodeLine{00038     \mbox{\hyperlink{classUsageManager}{UsageManager}} * usageManagerInstance = \mbox{\hyperlink{classUsageManager_af047400a8bd50603cff4bbffe37ebea2}{UsageManager::getInstance}}();}
\DoxyCodeLine{00039     \textcolor{keywordflow}{if} (usageManagerInstance == \textcolor{keyword}{nullptr}) CV\_Error(\mbox{\hyperlink{constants_8hpp_ab495e2525cf238bb390ca68277586bf4}{USAGE\_MANAGER\_NULLPTR\_ERROR}}, \mbox{\hyperlink{constants_8hpp_ade33b45fd12b716d5e837609aa163416}{USAGE\_MANAGER\_NULLPTR\_SCOPE}});}
\DoxyCodeLine{00040     \textcolor{keywordtype}{char} ** argv = * usageManagerInstance-\/>\mbox{\hyperlink{classUsageManager_abf0d03e097025fc8d85133f6a0ff83ff}{get\_argv}}();}
\DoxyCodeLine{00041     \textcolor{keyword}{const} \textcolor{keywordtype}{char} * imagesFolder = argv[\mbox{\hyperlink{constants_8hpp_a660671264f8ea07781cd04446d83cbf6}{imagesFolderOffset}}];}
\DoxyCodeLine{00042     \mbox{\hyperlink{classFacadeSingleton}{FacadeSingleton}} * facadeSingletonInstance = \mbox{\hyperlink{classFacadeSingleton_aeac68956d001824b9ecb75d385687535}{FacadeSingleton::getInstance}}();}
\DoxyCodeLine{00043     \textcolor{keywordflow}{if} (facadeSingletonInstance == \textcolor{keyword}{nullptr}) CV\_Error(\mbox{\hyperlink{constants_8hpp_aba8cd558b16927b8fe2d962968d20c10}{FACADE\_SINGLETON\_NULLPTR\_ERROR}}, \mbox{\hyperlink{constants_8hpp_ae5a935d42848889b474e368ef77cf46a}{FACADE\_SINGLETON\_NULLPTR\_SCOPE}});}
\DoxyCodeLine{00044     \mbox{\hyperlink{classRealSenseManager}{RealSenseManager}} * cameraManager = facadeSingletonInstance-\/>\mbox{\hyperlink{classFacadeSingleton_aa365ece7ecb2ba2d4a6d160e3698275a}{getCameraManager}}();}
\DoxyCodeLine{00045     \mbox{\hyperlink{classImageManager}{ImageManager}} * imageManager = facadeSingletonInstance-\/>\mbox{\hyperlink{classFacadeSingleton_a3bcded05b467db6b295d7958d31434d9}{getImageManager}}();}
\DoxyCodeLine{00046     }
\DoxyCodeLine{00047     \textcolor{comment}{// Do this until we don't capture, convert, scale, compute and save user\_nFrame frame}}
\DoxyCodeLine{00048     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} nFrame = 0; nFrame < user\_nFrame; nFrame++) \{}
\DoxyCodeLine{00049         \textcolor{comment}{// Capture}}
\DoxyCodeLine{00050         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} frameID = cameraManager-\/>\mbox{\hyperlink{classRealSenseManager_aac01bf5b0fe977a03ff6ab9fa2bbf06f}{getFrameID}}();}
\DoxyCodeLine{00051         rs2::depth\_frame depthFrame = rs2::depth\_frame(rs2::frame());}
\DoxyCodeLine{00052         rs2::frame colorFrame, colorizedDepthFrame;}
\DoxyCodeLine{00053         cameraManager-\/>\mbox{\hyperlink{classRealSenseManager_a47330063d22911a0dae8ff02a6c2b93e}{getVideoFramesRS}}(user\_nFrame, pipelineStream, depthFrame, colorFrame, colorizedDepthFrame, framesToSkip);}
\DoxyCodeLine{00054         \textcolor{keywordtype}{int} cols = depthFrame.get\_width(), rows = depthFrame.get\_height();}
\DoxyCodeLine{00055         \textcolor{comment}{// Convert}}
\DoxyCodeLine{00056         cv::Mat colorImage = \mbox{\hyperlink{classOpenCV__Manager_a763f869b71bef3cd172254b2511b789f}{realsenseFrameToMat}}(colorFrame), distanceImage = cv::Mat::zeros(rows, cols, CV\_32FC1);}
\DoxyCodeLine{00057         cv::Mat depthImage = \mbox{\hyperlink{classOpenCV__Manager_a763f869b71bef3cd172254b2511b789f}{realsenseFrameToMat}}(depthFrame), colorizedDepthImage = \mbox{\hyperlink{classOpenCV__Manager_a763f869b71bef3cd172254b2511b789f}{realsenseFrameToMat}}(colorizedDepthFrame);}
\DoxyCodeLine{00058         \textcolor{comment}{// Scale}}
\DoxyCodeLine{00059         depthImage *= 1000.0 * scale;}
\DoxyCodeLine{00060         \textcolor{comment}{// Compute distance}}
\DoxyCodeLine{00061         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < cols; i++) \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < rows; j++) distanceImage.at <\textcolor{keywordtype}{float}> (j, i) = (float) depthFrame.get\_distance(i, j);}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063         std::stringstream colorImagePath, distanceImagePath, colorizedDepthImagePath;}
\DoxyCodeLine{00064         colorImagePath <<           imagesFolder << \textcolor{stringliteral}{"{}rgb/"{}} <<   frameID << \textcolor{stringliteral}{"{}\_Color.png"{}};}
\DoxyCodeLine{00065         distanceImagePath <<        imagesFolder << \textcolor{stringliteral}{"{}d/"{}} <<     frameID << \textcolor{stringliteral}{"{}\_Distance.exr"{}};}
\DoxyCodeLine{00066         colorizedDepthImagePath <<  imagesFolder << \textcolor{stringliteral}{"{}depth/"{}} << frameID << \textcolor{stringliteral}{"{}\_Depth.png"{}};}
\DoxyCodeLine{00067         \textcolor{comment}{// Save}}
\DoxyCodeLine{00068         imageManager-\/>\mbox{\hyperlink{classImageManager_aeae03d66a4a45347804c4c927fa55b42}{saveImages}}( \{ colorImage, distanceImage, colorizedDepthImage \},}
\DoxyCodeLine{00069                                  \{ colorImagePath.str(), distanceImagePath.str(), colorizedDepthImagePath.str() \} );}
\DoxyCodeLine{00070         imageManager-\/>\mbox{\hyperlink{classImageManager_a6b448d93b315c6479590fa5afd278674}{releaseImages}}( \{ colorImage, depthImage, distanceImage, colorizedDepthImage \} );}
\DoxyCodeLine{00071     \}}
\DoxyCodeLine{00072 \}}

\end{DoxyCode}


References \mbox{\hyperlink{constants_8hpp_source_l00032}{FACADE\+\_\+\+SINGLETON\+\_\+\+NULLPTR\+\_\+\+ERROR}}, \mbox{\hyperlink{constants_8hpp_source_l00033}{FACADE\+\_\+\+SINGLETON\+\_\+\+NULLPTR\+\_\+\+SCOPE}}, \mbox{\hyperlink{UsageManager_8cpp_source_l00060}{Usage\+Manager\+::get\+\_\+argv()}}, \mbox{\hyperlink{FacadeSingleton_8cpp_source_l00095}{Facade\+Singleton\+::get\+Camera\+Manager()}}, \mbox{\hyperlink{RealSenseManager_8cpp_source_l00061}{Real\+Sense\+Manager\+::get\+Frame\+ID()}}, \mbox{\hyperlink{FacadeSingleton_8cpp_source_l00115}{Facade\+Singleton\+::get\+Image\+Manager()}}, \mbox{\hyperlink{FacadeSingleton_8cpp_source_l00089}{Facade\+Singleton\+::get\+Instance()}}, \mbox{\hyperlink{UsageManager_8cpp_source_l00050}{Usage\+Manager\+::get\+Instance()}}, \mbox{\hyperlink{classRealSenseManager_a47330063d22911a0dae8ff02a6c2b93e}{Real\+Sense\+Manager\+::get\+Video\+Frames\+RS()}}, \mbox{\hyperlink{constants_8hpp_source_l00064}{images\+Folder\+Offset}}, \mbox{\hyperlink{OpenCV__Manager_8cpp_source_l00015}{realsense\+Frame\+To\+Mat()}}, \mbox{\hyperlink{ImageManager_8cpp_source_l00050}{Image\+Manager\+::release\+Images()}}, \mbox{\hyperlink{ImageManager_8cpp_source_l00029}{Image\+Manager\+::save\+Images()}}, \mbox{\hyperlink{constants_8hpp_source_l00035}{USAGE\+\_\+\+MANAGER\+\_\+\+NULLPTR\+\_\+\+ERROR}}, and \mbox{\hyperlink{constants_8hpp_source_l00036}{USAGE\+\_\+\+MANAGER\+\_\+\+NULLPTR\+\_\+\+SCOPE}}.



Referenced by \mbox{\hyperlink{FacadeSingleton_8cpp_source_l00135}{Facade\+Singleton\+::get\+Video\+Frames()}}.

\mbox{\Hypertarget{classOpenCV__Manager_a763f869b71bef3cd172254b2511b789f}\label{classOpenCV__Manager_a763f869b71bef3cd172254b2511b789f}} 
\index{OpenCV\_Manager@{OpenCV\_Manager}!realsenseFrameToMat@{realsenseFrameToMat}}
\index{realsenseFrameToMat@{realsenseFrameToMat}!OpenCV\_Manager@{OpenCV\_Manager}}
\doxysubsubsection{\texorpdfstring{realsenseFrameToMat()}{realsenseFrameToMat()}}
{\footnotesize\ttfamily cv\+::\+Mat Open\+CV\+\_\+\+Manager\+::realsense\+Frame\+To\+Mat (\begin{DoxyParamCaption}\item[{const rs2\+::frame \&}]{single\+Frame }\end{DoxyParamCaption})}



This method converts a frame of type rs2\+::frame to cv\+::\+Mat. 


\begin{DoxyParams}{Parameters}
{\em single\+Frame} & A frame of type rs2\+::frame. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
cv\+::\+Mat 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{OpenCV__Manager_8cpp_source_l00015}{15}} of file \mbox{\hyperlink{OpenCV__Manager_8cpp_source}{Open\+CV\+\_\+\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00015                                                                        \{}
\DoxyCodeLine{00016     rs2::video\_frame videoFrame = singleFrame.as<rs2::video\_frame>();}
\DoxyCodeLine{00017     \textcolor{keyword}{const} \textcolor{keywordtype}{int} frameWidth = videoFrame.get\_width(), frameHeight = videoFrame.get\_height();}
\DoxyCodeLine{00018     }
\DoxyCodeLine{00019     \textcolor{keywordflow}{switch} (singleFrame.get\_profile().format()) \{}
\DoxyCodeLine{00020         \textcolor{keywordflow}{case} RS2\_FORMAT\_BGR8:}
\DoxyCodeLine{00021             \textcolor{keywordflow}{return} cv::Mat(cv::Size(frameWidth, frameHeight), CV\_8UC3, (\textcolor{keywordtype}{void} *) singleFrame.get\_data(), cv::Mat::AUTO\_STEP);}
\DoxyCodeLine{00022         \textcolor{keywordflow}{case} RS2\_FORMAT\_RGB8: \{}
\DoxyCodeLine{00023             cv::Mat rgbFrame = cv::Mat(cv::Size(frameWidth, frameHeight), CV\_8UC3, (\textcolor{keywordtype}{void} *) singleFrame.get\_data(), cv::Mat::AUTO\_STEP);}
\DoxyCodeLine{00024             cv::cvtColor(rgbFrame, rgbFrame, cv::COLOR\_RGB2BGR);}
\DoxyCodeLine{00025             \textcolor{keywordflow}{return} rgbFrame;}
\DoxyCodeLine{00026         \}}
\DoxyCodeLine{00027         \textcolor{keywordflow}{case} RS2\_FORMAT\_Z16:}
\DoxyCodeLine{00028             \textcolor{keywordflow}{return} cv::Mat(cv::Size(frameWidth, frameHeight), CV\_16UC1, (\textcolor{keywordtype}{void} *) singleFrame.get\_data(), cv::Mat::AUTO\_STEP);}
\DoxyCodeLine{00029         \textcolor{keywordflow}{case} RS2\_FORMAT\_Y8:}
\DoxyCodeLine{00030             \textcolor{keywordflow}{return} cv::Mat(cv::Size(frameWidth, frameHeight), CV\_8UC1, (\textcolor{keywordtype}{void} *) singleFrame.get\_data(), cv::Mat::AUTO\_STEP);}
\DoxyCodeLine{00031         \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00032             \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"{}Frame format is not supported yet!"{}});}
\DoxyCodeLine{00033             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00034     \}}
\DoxyCodeLine{00035 \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{OpenCV__Manager_8cpp_source_l00037}{get\+Video\+Frames\+CV()}}.

\mbox{\Hypertarget{classOpenCV__Manager_a91d73f7ffc0147f9e99a05e524a28db5}\label{classOpenCV__Manager_a91d73f7ffc0147f9e99a05e524a28db5}} 
\index{OpenCV\_Manager@{OpenCV\_Manager}!showSkeletonsCV@{showSkeletonsCV}}
\index{showSkeletonsCV@{showSkeletonsCV}!OpenCV\_Manager@{OpenCV\_Manager}}
\doxysubsubsection{\texorpdfstring{showSkeletonsCV()}{showSkeletonsCV()}}
{\footnotesize\ttfamily void Open\+CV\+\_\+\+Manager\+::show\+Skeletons\+CV (\begin{DoxyParamCaption}\item[{unsigned int}]{user\+\_\+n\+Frame,  }\item[{const float}]{skeleton\+Threshold }\end{DoxyParamCaption})}



Retrieve Open\+Pose\textquotesingle{}s output, convert it to Real\+Sense coordinate\textquotesingle{}s space, show results and save them. 


\begin{DoxyParams}{Parameters}
{\em user\+\_\+n\+Frame} & frame\textquotesingle{}s number to capture according to user choice. \\
\hline
{\em skeleton\+Threshold} & The magnitude or intensity that must be exceeded for a specific reaction, phenomenon, result, or condition to occur or be manifested. In this case, if the skeleton\textquotesingle{}s confidence mean value is greater than \char`\"{}skeleton\+Threshold\char`\"{}, then the skeleton will be considered a meaningful skeleton. \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
show\+Skeletons(unsigned int user\+\_\+n\+Frame) 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{OpenCV__Manager_8cpp_source_l00074}{74}} of file \mbox{\hyperlink{OpenCV__Manager_8cpp_source}{Open\+CV\+\_\+\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00074                                                                                              \{}
\DoxyCodeLine{00075     \mbox{\hyperlink{classFacadeSingleton}{FacadeSingleton}} * facadeSingletonInstance = \mbox{\hyperlink{classFacadeSingleton_aeac68956d001824b9ecb75d385687535}{FacadeSingleton::getInstance}}();}
\DoxyCodeLine{00076     \textcolor{keywordflow}{if} (facadeSingletonInstance == \textcolor{keyword}{nullptr}) CV\_Error(\mbox{\hyperlink{constants_8hpp_aba8cd558b16927b8fe2d962968d20c10}{FACADE\_SINGLETON\_NULLPTR\_ERROR}}, \mbox{\hyperlink{constants_8hpp_ae5a935d42848889b474e368ef77cf46a}{FACADE\_SINGLETON\_NULLPTR\_SCOPE}});}
\DoxyCodeLine{00077     \mbox{\hyperlink{classRealSenseManager}{RealSenseManager}} * cameraManager = facadeSingletonInstance-\/>\mbox{\hyperlink{classFacadeSingleton_aa365ece7ecb2ba2d4a6d160e3698275a}{getCameraManager}}();}
\DoxyCodeLine{00078     \mbox{\hyperlink{classOutputManagerJSON}{OutputManagerJSON}} * outputManagerJSON = (\mbox{\hyperlink{classOutputManagerJSON}{OutputManagerJSON}} *) facadeSingletonInstance-\/>\mbox{\hyperlink{classFacadeSingleton_a91e11305b99378bd6c7e8d6bfb5b1ca4}{getOutputManager}}();}
\DoxyCodeLine{00079     \mbox{\hyperlink{classUsageManager}{UsageManager}} * usageManagerInstance = facadeSingletonInstance-\/>\mbox{\hyperlink{classFacadeSingleton_a96d0bcfe088620c1dca604a92a3bbe44}{getUsageManager}}();}
\DoxyCodeLine{00080     \textcolor{keywordflow}{if} (usageManagerInstance == \textcolor{keyword}{nullptr}) CV\_Error(\mbox{\hyperlink{constants_8hpp_ab495e2525cf238bb390ca68277586bf4}{USAGE\_MANAGER\_NULLPTR\_ERROR}}, \mbox{\hyperlink{constants_8hpp_ade33b45fd12b716d5e837609aa163416}{USAGE\_MANAGER\_NULLPTR\_SCOPE}});}
\DoxyCodeLine{00081     \mbox{\hyperlink{classImageManager}{ImageManager}} * imageManager = facadeSingletonInstance-\/>\mbox{\hyperlink{classFacadeSingleton_a3bcded05b467db6b295d7958d31434d9}{getImageManager}}();}
\DoxyCodeLine{00082     \textcolor{keywordtype}{char} ** argv = * usageManagerInstance-\/>\mbox{\hyperlink{classUsageManager_abf0d03e097025fc8d85133f6a0ff83ff}{get\_argv}}(), * imagesFolder = argv[\mbox{\hyperlink{constants_8hpp_a660671264f8ea07781cd04446d83cbf6}{imagesFolderOffset}}], * outputFolder = argv[\mbox{\hyperlink{constants_8hpp_abbff93ab9bac10646d7ca187c30470ad}{outputFolderOffset}}];}
\DoxyCodeLine{00083     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} frameID = cameraManager-\/>\mbox{\hyperlink{classRealSenseManager_aac01bf5b0fe977a03ff6ab9fa2bbf06f}{getFrameID}}(), currentImageID;}
\DoxyCodeLine{00084     }
\DoxyCodeLine{00085     Json::Value currentJSON;}
\DoxyCodeLine{00086     }
\DoxyCodeLine{00087     \textcolor{comment}{// Do this until we don't iterate on user\_nFrame frame}}
\DoxyCodeLine{00088     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} nFrame = 0; nFrame < user\_nFrame; nFrame++) \{}
\DoxyCodeLine{00089         std::stringstream inputJsonFilePath, skeletonImagePath, colorImagePath, distanceImagePath, colorizedDepthImagePath, skeletonOnlyImagePath, outputJsonFilePath;}
\DoxyCodeLine{00090         currentImageID = frameID -\/ user\_nFrame + nFrame;}
\DoxyCodeLine{00091         }
\DoxyCodeLine{00092         \textcolor{comment}{// Internal Approach OpenPose}}
\DoxyCodeLine{00093 \textcolor{comment}{//        inputJsonFilePath << outputFolder << "{}op/"{} << nFrame << "{}\_keypoints.json"{};}}
\DoxyCodeLine{00094         \textcolor{comment}{// External Approach OpenPose}}
\DoxyCodeLine{00095         inputJsonFilePath << outputFolder << \textcolor{stringliteral}{"{}op/"{}} << currentImageID << \textcolor{stringliteral}{"{}\_Color\_keypoints.json"{}};}
\DoxyCodeLine{00096         }
\DoxyCodeLine{00097         \textcolor{comment}{// Try to load OpenPose's output JSON file}}
\DoxyCodeLine{00098         \textcolor{keywordflow}{if} (outputManagerJSON-\/>\mbox{\hyperlink{classOutputManagerJSON_ae664a1f8616d4876501710849c1c59d2}{loadJSON}}(inputJsonFilePath.str(), currentJSON)) \{}
\DoxyCodeLine{00099             Json::Value people = outputManagerJSON-\/>\mbox{\hyperlink{classOutputManagerJSON_ab8f239a05495e63d99ef7e783b566587}{getValueAt}}(\textcolor{stringliteral}{"{}people"{}}, currentJSON);}
\DoxyCodeLine{00100             colorImagePath << imagesFolder << \textcolor{stringliteral}{"{}rgb/"{}} << currentImageID << \textcolor{stringliteral}{"{}\_Color.png"{}};}
\DoxyCodeLine{00101             distanceImagePath << imagesFolder << \textcolor{stringliteral}{"{}d/"{}} << currentImageID << \textcolor{stringliteral}{"{}\_Distance.exr"{}};}
\DoxyCodeLine{00102             colorizedDepthImagePath << imagesFolder << \textcolor{stringliteral}{"{}depth/"{}} << currentImageID << \textcolor{stringliteral}{"{}\_Depth.png"{}};}
\DoxyCodeLine{00103             }
\DoxyCodeLine{00104             \textcolor{comment}{// Load images captured previously from camera}}
\DoxyCodeLine{00105             cv::Mat colorImage, colorizedDepthImage;}
\DoxyCodeLine{00106             imageManager-\/>\mbox{\hyperlink{classImageManager_aee3ff89c8031117cac540670fb8c09fe}{loadImage}}(colorImagePath.str(), cv::IMREAD\_COLOR, colorImage);}
\DoxyCodeLine{00107             cv::Mat distanceImage = cv::Mat(colorImage.rows, colorImage.cols, CV\_32FC1);}
\DoxyCodeLine{00108             imageManager-\/>\mbox{\hyperlink{classImageManager_aee3ff89c8031117cac540670fb8c09fe}{loadImage}}(distanceImagePath.str(), cv::IMREAD\_ANYCOLOR | cv::IMREAD\_ANYDEPTH, distanceImage);}
\DoxyCodeLine{00109             imageManager-\/>\mbox{\hyperlink{classImageManager_aee3ff89c8031117cac540670fb8c09fe}{loadImage}}(colorizedDepthImagePath.str(), cv::IMREAD\_COLOR, colorizedDepthImage);}
\DoxyCodeLine{00110             imageManager-\/>\mbox{\hyperlink{classImageManager_a0d1b8bf95333d94fe2842937e5ef818c}{showImages}}( \{ colorImage, colorizedDepthImage \}, \{ \textcolor{stringliteral}{"{}Frame No Skeleton"{}}, \textcolor{stringliteral}{"{}Frame Colorized Depth"{}} \} );}
\DoxyCodeLine{00111             cv::Mat skeletonOnlyImage = cv::Mat::zeros(colorImage.rows, colorImage.cols, colorImage.type());}
\DoxyCodeLine{00112             }
\DoxyCodeLine{00113             \textcolor{comment}{// Produce a JSON output file for people present in this frame}}
\DoxyCodeLine{00114             outputManagerJSON-\/>\mbox{\hyperlink{classOutputManagerJSON_a5e38880053af77de3de66925209ca5eb}{createJSON}}(people, colorImage, distanceImage, skeletonOnlyImage, currentImageID, outputFolder, skeletonThreshold);}
\DoxyCodeLine{00115             }
\DoxyCodeLine{00116             \textcolor{comment}{// Show images and save them}}
\DoxyCodeLine{00117             imageManager-\/>\mbox{\hyperlink{classImageManager_a0d1b8bf95333d94fe2842937e5ef818c}{showImages}}( \{ skeletonOnlyImage, colorImage \}, \{ \textcolor{stringliteral}{"{}Frame Skeleton Background Cut"{}}, \textcolor{stringliteral}{"{}Frame Skeleton"{}} \} );}
\DoxyCodeLine{00118             skeletonOnlyImagePath << imagesFolder << \textcolor{stringliteral}{"{}sk/"{}} << currentImageID << \textcolor{stringliteral}{"{}\_sk.png"{}};}
\DoxyCodeLine{00119             skeletonImagePath << imagesFolder << \textcolor{stringliteral}{"{}skeleton/"{}} << currentImageID << \textcolor{stringliteral}{"{}\_Skeleton.png"{}};}
\DoxyCodeLine{00120             imageManager-\/>\mbox{\hyperlink{classImageManager_aeae03d66a4a45347804c4c927fa55b42}{saveImages}}( \{ colorImage, skeletonOnlyImage \}, \{ skeletonImagePath.str(), skeletonOnlyImagePath.str() \} );}
\DoxyCodeLine{00121             imageManager-\/>\mbox{\hyperlink{classImageManager_a6b448d93b315c6479590fa5afd278674}{releaseImages}}( \{ colorImage, distanceImage, colorizedDepthImage, skeletonOnlyImage \} );}
\DoxyCodeLine{00122         \}}
\DoxyCodeLine{00123     \}}
\DoxyCodeLine{00124 \}}

\end{DoxyCode}


References \mbox{\hyperlink{OutputManagerJSON_8cpp_source_l00068}{Output\+Manager\+JSON\+::create\+JSON()}}, \mbox{\hyperlink{constants_8hpp_source_l00032}{FACADE\+\_\+\+SINGLETON\+\_\+\+NULLPTR\+\_\+\+ERROR}}, \mbox{\hyperlink{constants_8hpp_source_l00033}{FACADE\+\_\+\+SINGLETON\+\_\+\+NULLPTR\+\_\+\+SCOPE}}, \mbox{\hyperlink{UsageManager_8cpp_source_l00060}{Usage\+Manager\+::get\+\_\+argv()}}, \mbox{\hyperlink{FacadeSingleton_8cpp_source_l00095}{Facade\+Singleton\+::get\+Camera\+Manager()}}, \mbox{\hyperlink{RealSenseManager_8cpp_source_l00061}{Real\+Sense\+Manager\+::get\+Frame\+ID()}}, \mbox{\hyperlink{FacadeSingleton_8cpp_source_l00115}{Facade\+Singleton\+::get\+Image\+Manager()}}, \mbox{\hyperlink{FacadeSingleton_8cpp_source_l00089}{Facade\+Singleton\+::get\+Instance()}}, \mbox{\hyperlink{FacadeSingleton_8cpp_source_l00099}{Facade\+Singleton\+::get\+Output\+Manager()}}, \mbox{\hyperlink{FacadeSingleton_8cpp_source_l00107}{Facade\+Singleton\+::get\+Usage\+Manager()}}, \mbox{\hyperlink{OutputManagerJSON_8cpp_source_l00056}{Output\+Manager\+JSON\+::get\+Value\+At()}}, \mbox{\hyperlink{constants_8hpp_source_l00064}{images\+Folder\+Offset}}, \mbox{\hyperlink{ImageManager_8cpp_source_l00021}{Image\+Manager\+::load\+Image()}}, \mbox{\hyperlink{OutputManagerJSON_8cpp_source_l00043}{Output\+Manager\+JSON\+::load\+JSON()}}, \mbox{\hyperlink{constants_8hpp_source_l00065}{output\+Folder\+Offset}}, \mbox{\hyperlink{ImageManager_8cpp_source_l00050}{Image\+Manager\+::release\+Images()}}, \mbox{\hyperlink{ImageManager_8cpp_source_l00029}{Image\+Manager\+::save\+Images()}}, \mbox{\hyperlink{ImageManager_8cpp_source_l00039}{Image\+Manager\+::show\+Images()}}, \mbox{\hyperlink{constants_8hpp_source_l00035}{USAGE\+\_\+\+MANAGER\+\_\+\+NULLPTR\+\_\+\+ERROR}}, and \mbox{\hyperlink{constants_8hpp_source_l00036}{USAGE\+\_\+\+MANAGER\+\_\+\+NULLPTR\+\_\+\+SCOPE}}.



Referenced by \mbox{\hyperlink{FacadeSingleton_8cpp_source_l00145}{Facade\+Singleton\+::show\+Skeletons()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Managers/\mbox{\hyperlink{OpenCV__Manager_8hpp}{Open\+CV\+\_\+\+Manager.\+hpp}}\item 
Managers/\mbox{\hyperlink{OpenCV__Manager_8cpp}{Open\+CV\+\_\+\+Manager.\+cpp}}\end{DoxyCompactItemize}
